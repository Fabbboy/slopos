#![allow(dead_code)]

// SlopOS Memory and Paging Constants (ported from mm_constants.h)

pub const BOOT_STACK_SIZE: u64 = 0x4000;
pub const BOOT_STACK_PHYS_ADDR: u64 = 0x20000;
pub const EARLY_PML4_PHYS_ADDR: u64 = 0x30000;
pub const EARLY_PDPT_PHYS_ADDR: u64 = 0x31000;
pub const EARLY_PD_PHYS_ADDR: u64 = 0x32000;

pub const KERNEL_VIRTUAL_BASE: u64 = 0xFFFF_FFFF_8000_0000;
pub const KERNEL_PML4_INDEX: usize = 511;
pub const KERNEL_PDPT_INDEX: usize = 510;

pub const HHDM_VIRT_BASE: u64 = 0xFFFF_8000_0000_0000;

pub const KERNEL_HEAP_VBASE: u64 = 0xFFFF_FFFF_9000_0000;
pub const KERNEL_HEAP_SIZE: u64 = 256 * 1024 * 1024;

pub const USER_SPACE_START_VA: u64 = 0x0000_0000_0040_0000;
pub const USER_SPACE_END_VA: u64 = 0x0000_8000_0000_0000;

pub const PROCESS_CODE_START_VA: u64 = 0x0000_0000_0040_0000;
pub const PROCESS_DATA_START_VA: u64 = 0x0000_0000_0080_0000;
pub const PROCESS_HEAP_START_VA: u64 = 0x0000_0000_0100_0000;
pub const PROCESS_HEAP_MAX_VA: u64 = 0x0000_0000_4000_0000;
pub const PROCESS_STACK_TOP_VA: u64 = 0x0000_7FFF_FF00_0000;
pub const PROCESS_STACK_SIZE_BYTES: u64 = 0x0000_0000_0010_0000;

pub const PAGE_SIZE_4KB: u64 = 0x1000;
pub const PAGE_SIZE_2MB: u64 = 0x20_0000;
pub const PAGE_SIZE_1GB: u64 = 0x4000_0000;
pub const PAGE_ALIGN: u64 = 0x1000;
pub const STACK_ALIGN: u64 = 16;

pub const EXCEPTION_STACK_REGION_BASE: u64 = 0xFFFF_FFFF_B000_0000;
pub const EXCEPTION_STACK_REGION_STRIDE: u64 = 0x0001_0000;
pub const EXCEPTION_STACK_GUARD_SIZE: u64 = PAGE_SIZE_4KB;
pub const EXCEPTION_STACK_PAGES: u64 = 8;
pub const EXCEPTION_STACK_SIZE: u64 = EXCEPTION_STACK_PAGES * PAGE_SIZE_4KB;
pub const EXCEPTION_STACK_TOTAL_SIZE: u64 = EXCEPTION_STACK_GUARD_SIZE + EXCEPTION_STACK_SIZE;

pub const PAGE_PRESENT: u64 = 0x001;
pub const PAGE_WRITABLE: u64 = 0x002;
pub const PAGE_USER: u64 = 0x004;
pub const PAGE_WRITE_THROUGH: u64 = 0x008;
pub const PAGE_CACHE_DISABLE: u64 = 0x010;
pub const PAGE_ACCESSED: u64 = 0x020;
pub const PAGE_DIRTY: u64 = 0x040;
pub const PAGE_SIZE_FLAG: u64 = 0x080;
// Preserve legacy name from C header; used as the large-page flag.
pub const PAGE_SIZE_FLAG_COMPAT: u64 = PAGE_SIZE_FLAG;
pub const PAGE_GLOBAL: u64 = 0x100;

pub const PAGE_KERNEL_RW: u64 = PAGE_PRESENT | PAGE_WRITABLE;
pub const PAGE_KERNEL_RO: u64 = PAGE_PRESENT;
pub const PAGE_USER_RW: u64 = PAGE_PRESENT | PAGE_WRITABLE | PAGE_USER;
pub const PAGE_USER_RO: u64 = PAGE_PRESENT | PAGE_USER;
pub const PAGE_LARGE_KERNEL_RW: u64 = PAGE_PRESENT | PAGE_WRITABLE | PAGE_SIZE_FLAG;

pub const ENTRIES_PER_PAGE_TABLE: usize = 512;

pub const MAX_MEMORY_REGIONS: usize = 64;
pub const MAX_PROCESSES: usize = 256;
pub const INVALID_PROCESS_ID: u32 = 0xFFFF_FFFF;

pub const EFI_PAGE_SIZE: u64 = 0x1000;
pub const EFI_CONVENTIONAL_MEMORY: u64 = 7;

